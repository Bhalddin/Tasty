name: Xenial.Tasty

on:
  push:
    branches: [ master ]
    tags: [v*]
  pull_request:
    branches: [ master ]

jobs:
#  build:

#    runs-on: ${{ matrix.os }}
#    strategy:
#      matrix:
#        os: [macos-latest, ubuntu-latest, windows-latest]

#    steps:
#    - uses: actions/checkout@v2
#    - name: Fetch all history for all tags and branches
#      run: |
#        git fetch --prune --unshallow
#    - name: Setup .NET Core
#      uses: actions/setup-dotnet@v1
#      with:
#        dotnet-version: 3.1.x
#    - name: Build
#      run: dotnet run --project build/Tasty.Build/Tasty.Build.csproj
#  docs:
#    runs-on: windows-latest
#    steps:
#    - uses: actions/checkout@v2
#    - name: Fetch all history for all tags and branches
#      run: |
#        git fetch --prune --unshallow
#    - name: Setup .NET Core
#      uses: actions/setup-dotnet@v1
#      with:
#        dotnet-version: 3.1.x
#    - name: Restore tools
#      run: dotnet tool restore
#    - name: Build
#      run: dotnet run --project build/Tasty.Build/Tasty.Build.csproj docs
#    outputs: 
#      docs: ./artifacts/docs
  deploy-docs:
    runs-on: ubuntu-latest
    #if: startsWith(github.event.release.tag_name, v)
    #needs: [docs]
    steps:
      - name: Pip Installer
        uses: BSFishy/pip-action@v1
        with:
          packages: |
            wheel
            creep
      - name: EnvVars
        env: |
          FTP_HOST: ${{ secrets.FTP_HOST }}
          FTP_USER: ${{ secrets.FTP_USER }}
          FTP_PASS: ${{ secrets.FTP_PASS }}
        run: |
          echo "{\"default\": {\"connection\": \"ftp://$FtpUser:$FtpPass@$FtpHost\" }}"
    
